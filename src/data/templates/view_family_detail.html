{% extends "view_page_detail.html" %}
{% load my_tags %}

{% block content %} 

   <script type="text/javascript">
     $(function(){

            $('#tabs').tabs();
      });
   </script>

<div class="content" id="IndividualDetail">

{% include "detail_breadcrumb.html" %}

<h2>{{familyform.father|render_name:user}} and {{familyform.mother|render_name:user}}</h2>

<div id="summaryarea">
<table class="infolist" style="width:90%;"> {% comment %} 4 cols {% endcomment %}
<tbody>
    {% for error in personform.errors %}
       <p id="error">Error in person: {{error}}</p>
    {% endfor %}
    {% for error in nameform.errors %}
       <p id="error">Error in name: {{error}}</p>
    {% endfor %}
    {% for error in surnameform.errors %}
       <p id="error">Error in surname: {{error}}</p>
    {% endfor %}
<form method="post">{% csrf_token %}
<tr>
<th colspan="2">Father</th>
<th colspan="2">Mother</th>
</tr>
<tr>
 <td class="ColumnAttribute">Name:</td>
 <td class="ColumnValue" id="data"><a href="/person/{{familyform.father.handle}}">{% render familyform.father user action %}</a></td>
 <td class="ColumnAttribute">Name:</td>
 <td class="ColumnValue" id="data"><a href="/person/{{familyform.mother.handle}}">{% render familyform.mother user action %}</a></td>
</tr>
{% if user.is_authenticated or not familyform.father.probably_alive %}
<tr>
 <td class="ColumnAttribute">Birth:</td>
 <td class="ColumnValue" id="data">{{familyform.father.birth|render_date:user}}</td>
 <td class="ColumnAttribute">Birth:</td>
 <td class="ColumnValue" id="data">{{familyform.mother.birth|render_date:user}}</td>
</tr>
{% else %}
<tr>
 <td class="ColumnAttribute">{{familyform.father.death.label}}:</td>
 <td class="ColumnValue" id="data">{% render familyform.father user action %}</td>
 <td class="ColumnAttribute">Birth:</td>
 <td class="ColumnValue" id="data">[Private]</td>
</tr>
{% endif %}
<tr>
 <td class="ColumnAttribute">Death:</td>
 <td class="ColumnValue" id="data">{{familyform.father.death|render_date:user}}</td>
 <td class="ColumnAttribute">Death:</td>
 <td class="ColumnValue" id="data">{{familyform.mother.death|render_date:user}}</td>
</tr>
</tbody>
</table>
<table class="infolist"> 
<tbody>
<tr>
  <th colspan="4">Relationship information</th>
</tr>
<tr>
 <td class="ColumnAttribute">ID:</td>
 <td class="ColumnValue" id="data">{{familyform.gramps_id}}</td>
 <td class="ColumnAttribute">Type:</td>
 <td class="ColumnValue" id="data">RELTYPE</td>
</tr>
<tr>
 <td class="ColumnAttribute">Marker:</td>
 <td class="ColumnValue" id="data">{{familyform.marker_type}}</td>
 <td class="ColumnAttribute">Private:</td>
 <td class="ColumnValue" id="data">{{familyform.private}}</td>
</tr>
</tbody>
</table>
</div>
</div>

<!-- Tabs -->

<div class="ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">
  <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
    <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#tab-children">Children</a></li>
    <li class="ui-corner-top ui-state-default"><a href="#tab-events">Events</a></li>
    <li class="ui-corner-top ui-state-default"><a href="#tab-sources">Sources</a></li>
    <li class="ui-corner-top ui-state-default"><a href="#tab-attributes">Attributes</a></li>
    <li class="ui-corner-top ui-state-default"><a href="#tab-notes">Notes</a></li>
    <li class="ui-corner-top ui-state-default"><a href="#tab-gallery">Gallery</a></li>
    <li class="ui-corner-top ui-state-default"><a href="#tab-lds">LDS</a></li>
  </ul>
  <div class="ui-tabs-panel ui-widget-content ui-corner-bottom" id="tab-children"> 
    <!-- Events -->
    {% children_table family user action "/family/%s/children" family.handle %}
  </div>
  <div class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide" id="tab-events">
    {% event_table family user action "/family/%s/children" family.handle %}
  </div>
  <div class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide" id="tab-sources">
    {% source_table family user action "/family/%s/children" family.handle %}
  </div>
  <div class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide" id="tab-attributes">
    {% attribute_table family user action "/family/%s/children" family.handle %}
  </div>
  <div class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide" id="tab-notes">
    {% note_table family user action "/family/%s/children" family.handle %}
  </div>
  <div class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide" id="tab-gallery">
    {% gallery_table family user action "/family/%s/children" family.handle %}
  </div>
  <div class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide" id="tab-lds">
    {% lds_table family user action "/family/%s/children" family.handle %}
  </div>
</div>

{% if user.is_superuser %}
  {% if action == "edit" %}
    {% make_button "Back to Family" "/family/%s" family.handle %}
    <input type="hidden" name="action" value="save"/>
    <input type="submit" value="Save"/>
  {% else %}
    {% ifequal action "add" %}
      {% make_button "Cancel" "/family/" %}
      <input type="hidden" name="action" value="create"/>
      <input type="submit" value="Create"/>
    {% else %}
      {% make_button "Back to Families" "/family" %}
      {% make_button "Add Family" "/family/add" %}
      {% make_button "Edit Family" "/family/%s/edit" family.handle %}
      {% make_button "Delete Family" "/family/%s/delete" family.handle %}
    {% endifequal %}
  {% endif %}
{% else %}
{% endif %}
</form>
{% endblock %}

